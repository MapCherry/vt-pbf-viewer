(function(t){function e(e){for(var n,s,o=e[0],c=e[1],u=e[2],l=0,v=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(v.length)v.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vt-pbf-viewer/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var f=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"top"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.pbfUrl,expression:"pbfUrl"}],attrs:{type:"text"},domProps:{value:t.pbfUrl},on:{input:function(e){e.target.composing||(t.pbfUrl=e.target.value)}}})]),r("div",{staticClass:"main"},[r("PbfViewer",{attrs:{pbf:t.pbfUrl}})],1),r("div",{staticClass:"bottom"},[r("div",[t._v(" "+t._s(t.title)+" - Find the source code on "),r("a",{attrs:{href:"https://github.com/MapDev-OSM/vt-pbf-viewer"}},[t._v("GitHub")]),t._v(" Â© 2020 dorinoltean@MapDev ")])])])},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.error?r("div",{staticClass:"error"},[t._v(t._s(t.error))]):r("canvas",{ref:"canvas"})},o=[],c=(r("4160"),r("fb6a"),r("b64b"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("159b"),r("96cf"),r("1da1")),u=r("740e"),f=r.n(u),l=r("7915"),v=r.n(l),p=f.a.VectorTileFeature.types,h={name:"PbfViewer",props:{pbf:String},data:function(){return{error:"",canvas:{},canvasCtx:{}}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.redraw();case 2:case"end":return e.stop()}}),e)})))()},watch:{pbf:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.error="",e.next=3,t.$nextTick();case 3:return e.next=5,t.redraw();case 5:case"end":return e.stop()}}),e)})))()}},methods:{redraw:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resetCanvas(),e.next=3,t.fetchPbfBuffer();case 3:if(r=e.sent,r){e.next=6;break}return e.abrupt("return");case 6:t.drawPbf(r);case 7:case"end":return e.stop()}}),e)})))()},resetCanvas:function(){var t=this.$refs["canvas"].parentElement,e=Math.min(t.offsetWidth,t.offsetHeight);this.canvas=this.$refs["canvas"],this.canvas.width=this.canvas.height=e-4,this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.setTransform(1,0,0,1,0,0),this.canvasCtx.clearRect(0,0,this.canvas.width,this.canvas.height)},setCanvasScale:function(t){var e=parseInt(this.canvas.width);this.canvasCtx.translate(.05*e,.05*e);var r=e/t*.9;this.canvasCtx.scale(r,r)},drawControlLine:function(){var t=this.canvasCtx.strokeStyle;this.canvasCtx.strokeStyle="red",this.canvasCtx.beginPath(),this.canvasCtx.moveTo(0,0),this.canvasCtx.lineTo(0,4096),this.canvasCtx.lineTo(4096,4096),this.canvasCtx.lineTo(4096,0),this.canvasCtx.lineTo(0,0),this.canvasCtx.stroke(),this.canvasCtx.strokeStyle=t},drawPbf:function(t){try{var e=new f.a.VectorTile(new v.a(new Uint8Array(t)))}catch(h){return void(this.error="Unsupported pbf format. Loading resulted in: "+h)}var r=Object.keys(e.layers);if(0!=r.length){var n=e.layers[r[0]].extent;this.setCanvasScale(n);for(var a=0,i=r;a<i.length;a++)for(var s=i[a],o=e.layers[s],c=0;c<o.length;c++){var u=o.feature(c),l=u.loadGeometry();switch(p[u.type]){case"Polygon":this.drawPolygons(l);break;case"LineString":this.drawLines(l);break;case"Point":this.drawPoints(l);break;default:console.error("No support for drawing type: ",p[u.type]);break}}this.drawControlLine()}else console.warn("No layers found. Nothing to plot")},fetchPbfBuffer:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.pbf);case 3:return r=e.sent,e.next=6,r.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e["catch"](0),t.error="Could not load pbf file: "+e.t0,e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},drawPolygons:function(t){var e=this;t.forEach((function(t){e.drawLine(t)}))},drawLines:function(t){var e=this;t.forEach((function(t){e.drawLine(t)}))},drawPoints:function(t){var e=this;t.forEach((function(t){e.drawPoint(t)}))},drawLine:function(t){var e=this;this.canvasCtx.beginPath();var r=t[0];this.canvasCtx.moveTo(r.x,r.y),t.slice(1).forEach((function(t){e.canvasCtx.lineTo(t.x,t.y)})),this.canvasCtx.stroke()},drawPoint:function(){}}},d=h,b=r("2877"),w=Object(b["a"])(d,s,o,!1,null,null,null),x=w.exports,m="/vt-pbf-viewer/data/1444.pbf",g={name:"App",components:{PbfViewer:x},data:function(){return{pbfUrl:m,title:"Vector Tile PBF Viewer"}},created:function(){document.title=this.title+" - MapDev"}},y=g,C=Object(b["a"])(y,a,i,!1,null,null,null),P=C.exports;r("7d05");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(P)}}).$mount("#app")},"7d05":function(t,e,r){}});
//# sourceMappingURL=app.21aa1f98.js.map